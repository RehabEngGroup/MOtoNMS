

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>C3DtoMAT: from C3D to MATLAB format &mdash; MOtoNMS 2.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="MOtoNMS 2.1 documentation" href="../index.html" />
    <link rel="next" title="Data Processing: elaborate your dynamic trials" href="dataProcessing.html" />
    <link rel="prev" title="Acquisition Interface: describing your data" href="acquisitionInterface.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dataProcessing.html" title="Data Processing: elaborate your dynamic trials"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="acquisitionInterface.html" title="Acquisition Interface: describing your data"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">MOtoNMS 2.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="c3dtomat-from-c3d-to-matlab-format">
<span id="c3d2mat"></span><h1>C3DtoMAT: from C3D to MATLAB format<a class="headerlink" href="#c3dtomat-from-c3d-to-matlab-format" title="Permalink to this headline">¶</a></h1>
<p>This step retrieves data from the C3D input files and store them in organized MATLAB structures (<tt class="docutils literal"><span class="pre">.mat</span></tt> files). This avoid to have continuous accesses to C3D files, which are computationally expensive and redundant. Any setup or configuration file is required in this step.</p>
<p>C3D2MAT only requires to specify the input file path. If not already available, it generates corresponding folders for the elaborated data (<a class="reference internal" href="folders.html#dataorganization"><em>Folders: organize your work</em></a>, <tt class="docutils literal"><span class="pre">MyData\ElaboratedData\subjectXXX\Year-Month-Day\</span></tt>) and then converts all the data in mat format and stored them in the <tt class="docutils literal"><span class="pre">sessionData</span></tt> folder (<tt class="docutils literal"><span class="pre">MyData\ElaboratedData\subjectXXX\Year-Month-Day\sessionData\</span></tt>). For each trial (i.e., C3D file in the input folder), a new subfolder is created with Markers (<tt class="docutils literal"><span class="pre">Markers.mat</span></tt>), Force Platform Data (<tt class="docutils literal"><span class="pre">FPdata.mat</span></tt>) and all data stored in the analog channels (<tt class="docutils literal"><span class="pre">AnalogData.mat</span></tt>). When C3D files include events, they are converted and stored as well (<tt class="docutils literal"><span class="pre">Events.mat</span></tt>).</p>
<p>You can add events to your C3D files using Mokka, a freely available software for biomechanical data analysis (<a class="reference external" href="http://b-tk.googlecode.com/svn/web/mokka/index.html">http://b-tk.googlecode.com/svn/web/mokka/index.html</a>), which supports many different file formats and allows to write on C3D files with a very user-friendly interface.</p>
<p>Information common to all the trials of the session are saved in the <tt class="docutils literal"><span class="pre">sessionData</span></tt> folder. This includes markers labels of dynamic trials (<tt class="docutils literal"><span class="pre">dMLabels.mat</span></tt>), analog data labels (<tt class="docutils literal"><span class="pre">AnalogDataLabels.mat</span></tt>), force platform information (<tt class="docutils literal"><span class="pre">ForcePlatformInfo.mat</span></tt>), rates (<tt class="docutils literal"><span class="pre">Rates.mat</span></tt>), and the trials list (<tt class="docutils literal"><span class="pre">trialsName.mat</span></tt>). If any inconsistency is found, it is pointed out in the MATLAB Command Window.</p>
<p>Two implementations for <tt class="docutils literal"><span class="pre">C3D2MAT</span></tt> are available, one using <a class="reference external" href="http://www.c3dserver.com/">C3Dserver</a> software and one exploiting <a class="reference external" href="https://code.google.com/p/b-tk/">BTK</a>. They return the same results, but are based on two different tools to access C3D files. You can choose among the two alternatives according to your system requirements (refer to <a class="reference internal" href="gettingStarted.html#installation"><em>Installation</em></a>).</p>
<div class="section" id="how-to-run-the-program">
<span id="c3d2matrun"></span><h2>How to run the program<a class="headerlink" href="#how-to-run-the-program" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Set MATLAB path on <tt class="docutils literal"><span class="pre">src\C3D2MAT_btk</span></tt> (or <tt class="docutils literal"><span class="pre">C3D2MAT_c3dserver</span></tt>) folder</li>
<li>Run <tt class="docutils literal"><span class="pre">C3D2MAT.m</span></tt></li>
<li>Select your C3D input data folder</li>
</ol>
<p><strong>Output</strong>: data from C3D files in the specified data folder are converted and saved in mat format.</p>
<p>Please pay ATTENTION to the following IMPORTANT NOTES:</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>Input files folder MUST be inside a folder named <tt class="docutils literal"><span class="pre">InputData</span></tt> (<a class="reference internal" href="folders.html#dataorganization"><em>Folders: organize your work</em></a>).</li>
<li>The execution of <tt class="docutils literal"><span class="pre">C3D2MAT</span></tt> does not overwrite information common to the acquisition session, i.e. that must be the same for all trials collected during an acquisition, as <tt class="docutils literal"><span class="pre">trialsName.mat</span></tt>, <tt class="docutils literal"><span class="pre">Rates.mat</span></tt>, <tt class="docutils literal"><span class="pre">dMLabels</span></tt>, <tt class="docutils literal"><span class="pre">AnalogDataLabels.mat</span></tt>, <tt class="docutils literal"><span class="pre">ForcePlatformsInfo.mat</span></tt>. Cancel the <tt class="docutils literal"><span class="pre">sessionData</span></tt> folder before running again the program if you add trials or modify your data set.</li>
<li>Different events MUST have different name (<a class="reference external" href="analysisWindDef">Analysis Window Definition</a>, <tt class="docutils literal"><span class="pre">WindowFromC3D</span></tt>).</li>
<li>Events for foot strike and foot off must identify frames with non-zero force values (<a class="reference external" href="analysisWindDef">Analysis Window Definition</a>, <tt class="docutils literal"><span class="pre">StanceOnFPfromC3D</span></tt>).</li>
<li>If you are using <tt class="docutils literal"><span class="pre">C3D2MAT_c3dserver</span></tt>, remember to install <cite>C3Dserver`_software (:ref:`Installation &lt;installation&gt;</cite>) and that it works only on MATLAB 32 bit.</li>
<li>If you are using <tt class="docutils literal"><span class="pre">C3D2MAT_btk</span></tt>, remember to download the correct <a class="reference external" href="https://code.google.com/p/b-tk/wiki/MatlabBinaries">BTK</a> version for your    system and to add it to the path of MATLAB. Type the command <tt class="docutils literal"><span class="pre">help</span> <span class="pre">btk</span></tt> in the MATLAB command window to verify that BTK is loaded in MATLAB (<a class="reference internal" href="gettingStarted.html#installation"><em>Installation</em></a>).</li>
<li>Data gathered using FP of type 4 are stored in the C3D files in <span class="math">\(V\)</span> (<a class="reference external" href="http://www.c3d.org/pdf/c3dformat_ug.pdf">http://www.c3d.org/pdf/c3dformat_ug.pdf</a>). <tt class="docutils literal"><span class="pre">C3D2MAT</span></tt> retrieves and directly converts force data in <span class="math">\(N\)</span> and <span class="math">\(N \cdot mm\)</span> or <span class="math">\(N \cdot m\)</span> (according to the used distance unit). Be aware that the scale of results saved in <tt class="docutils literal"><span class="pre">FPdata.mat</span></tt> does not match with the one you see in the input C3D files.</li>
<li>C3D files storing data gathered with FPs of type 4 must include information about the corresponding FP calibration matrix. This is required to convert force data from <span class="math">\(V\)</span> to <span class="math">\(N\)</span> and <span class="math">\(N \cdot mm\)</span> or <span class="math">\(N \cdot m\)</span>.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">C3DtoMAT: from C3D to MATLAB format</a><ul>
<li><a class="reference internal" href="#how-to-run-the-program">How to run the program</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="acquisitionInterface.html"
                        title="previous chapter">Acquisition Interface: describing your data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dataProcessing.html"
                        title="next chapter">Data Processing: elaborate your dynamic trials</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/manual/C3DtoMAT.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dataProcessing.html" title="Data Processing: elaborate your dynamic trials"
             >next</a> |</li>
        <li class="right" >
          <a href="acquisitionInterface.html" title="Acquisition Interface: describing your data"
             >previous</a> |</li>
        <li><a href="../index.html">MOtoNMS 2.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Alice Mantoan, Monica Reggiani.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>